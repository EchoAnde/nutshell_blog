
@{
    Layout = null;
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 权限管理 <span class="c-gray en">&gt;</span> 角色管理 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新"><i class="Hui-iconfont">&#xe68f;</i></a></nav>
<div class="page-container">
    <div class="text-c">

        <input type="text" class="input-text" style="width:250px" placeholder="输入管理员名称" id="" name="">
        <button type="submit" class="btn btn-success" id="" name=""><i class="Hui-iconfont">&#xe665;</i> 搜索</button>
    </div>
    <div class="cl pd-5 bg-1 bk-gray mt-20"> <span class="l"><a href="javascript:;" onclick="datadel()" class="btn btn-danger radius"><i class="Hui-iconfont">&#xe6e2;</i> 删除角色</a> <a href="javascript:;" onclick="admin_add('添加角色','/admin/power/addrole','800','500')" class="btn btn-primary radius"><i class="Hui-iconfont">&#xe600;</i> 添加角色</a></span> </div>
    <table class="table table-border table-bordered table-bg" id="list">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" class="checkall" />
                </th>
                <th>ID</th>
                <th>角色名称</th>
                <th>说明</th>
                <th>创建时间</th>
                <th>创建人</th>
            </tr>
        </thead>
    </table>
</div>

@section script{
    <script type="text/javascript" src="~/Content/H-ui.admin/lib/My97DatePicker/4.8/WdatePicker.js"></script>
    <script src="~/Content/H-ui.admin/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="~/Content/H-ui.admin/lib/laypage/1.2/laypage.js"></script>
    <script type="text/javascript">

        $(function () {
            $('#list').dataTable({
                ajax: {
                    url: '@Url.Action("GetRoleList")',
                    type:'post'
                },
                processing: true,
                paging: false,
                searching: false,
                info: false,
                autowidth: true,
                columns: [
                    {
                        "sClass": "text-center",
                        "data": "Id",
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox"  class="checkchild"  value="' + data + '" />';
                        },
                        "bSortable": false
                    },
                    { data: 'Id'},
                    { data: 'Name'},
                    {
                        data: 'Description', render: function (data, type, row, meta) {
                            return data;
                        }
                    },
                    {
                        data: 'CreateTime', render: function (data, type, row, meta) {
                            data.replace(/Date\([\d+]+\)/, function (a) { eval('d = new ' + a) });
                            return d.format("yyyy-MM-dd hh:mm:ss");
                        }
                    },
                    { data: 'CreatePerson'}
                ],
                drawCallback: function (settings) {
                    // 高亮显示当前行
                    $(settings.nTable).find("tbody tr").click(function (e) {
                        $(e.target).parents('table').find('tr').removeClass('warning');
                        $(e.target).parents('tr').addClass('warning');
                    });
                },
            });
        })

        function admin_add(title,url,w,h) {
            layer_show(title,url,w,h)
        }
    </script>
}